var VueLaravelTable=function(e,t){"use strict";function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(a.push(s.value),!t||a.length!==t);n=!0);}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var i={name:"vue-laravel-table",props:{laravelDataUrl:{type:String,required:!0},laravelDataResource:{type:Object,required:!0},hideColumns:{type:Array,required:!1,default:[]},showActions:{type:Array,required:!1,default:[]},showActionIcons:{type:Boolean,required:!1},csrfToken:{type:String,required:!1},searchableColumns:{type:Array,required:!1,default:[]},showPerPage:{type:Boolean,required:!1},orderableColumns:{type:Array,required:!1}},data:function(){return{laravelData:{},tableHeaders:[],loading:!1,acceptedActions:["create","edit","show","delete"],searchQuery:"",currentPage:1,perPage:25,orderBy:{direction:!1,column:!1}}},mounted:function(){this.getResults()},computed:{generateTableHeaders:function(){var e=[];if(this.laravelData.total>0){for(var t=0,a=Object.entries(this.laravelData.data[0]);t<a.length;t++){var r=n(a[t],2),i=r[0];r[1];if(!this.hideColumns.includes(i))(s={})[i]=this.formatHeader(i),e.push(s)}var s;if(this.showActions.length)(s={}).actions=this.formatHeader("actions");return e.push(s),e}}},watch:{searchQuery:a(t).default.debounce((function(e){this.search(e)}),300),perPage:function(e){this.changePerPage(e)}},methods:{toggleOrder:function(e,t){e.preventDefault(),0==this.orderBy.direction||this.orderBy.column!=t?(this.orderBy.direction="asc",this.orderBy.column=t):"asc"==this.orderBy.direction?(this.orderBy.direction="desc",this.orderBy.column=t):"desc"==this.orderBy.direction&&(this.orderBy.direction=!1,this.orderBy.column=!1),this.getResults(this.searchQuery)},search:function(e){this.currentPage=1,this.getResults(e)},paginate:function(e){e.preventDefault();var t=new URL(e.target.getAttribute("data-href"));this.currentPage=t.searchParams.get("page"),this.getResults(this.searchQuery)},changePerPage:function(e){this.currentPage=1,this.getResults(this.searchQuery)},getResults:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loading=!0;var a=new URL(this.laravelDataUrl);a.searchParams.set("page",this.currentPage),!1!==t&&t.length&&(a.searchParams.set("q",t),a.searchParams.set("qC",this.searchableColumns)),0==this.orderBy.column&&0==this.orderBy.direction||(a.searchParams.set("orderBy",this.orderBy.column),a.searchParams.set("orderDirection",this.orderBy.direction)),a.searchParams.set("perPage",this.perPage),axios.get(a).then((function(t){e.laravelData=t.data,e.tableHeaders=e.generateTableHeaders,e.loading=!1})).catch((function(e){throw new Error(e)}))},formatHeader:function(e){return(e[0].toUpperCase()+e.slice(1)).replace(/_/g," ")},generateRowActions:function(e){for(var t,a,r,i=[],s=0,o=Object.entries(this.showActions);s<o.length;s++){var l=n(o[s],2),c=(l[0],l[1]);this.acceptedActions.includes(c)&&"create"!=c&&i.push((t={},a=c,r=this.generateActionHtml(c,this.csrfToken,e),a in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t))}return i},generateCreateButton:function(){return this.generateActionHtml("create")},generateActionHtml:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n="",r=this.laravelDataResource.prefix?"/"+this.laravelDataResource.prefix+"/"+this.laravelDataResource.name+"/":"/"+this.laravelDataResource.name+"/";switch(e){case"create":n='<a class="action-link btn btn-primary" href="'+r+'create">'+(this.showActionIcons?'<i class="fas fa-fw fa-plus"></i>':"Create")+"</a>";break;case"edit":n='<a class="action-link" href="'+r+a+'/edit">'+(this.showActionIcons?'<i class="fas fa-fw fa-edit"></i>':"Edit")+"</a>";break;case"show":n='<a class="action-link" href="'+r+a+'">'+(this.showActionIcons?'<i class="fas fa-fw fa-eye"></i>':"Show")+"</a>";break;case"delete":n='<form class="action-form" method="post" action="'+r+a+'"><input type="hidden" name="_token" value="'+t+'"><input type="hidden" name="_method" value="DELETE"><button class="btn btn-link text-danger" type="submit">'+(this.showActionIcons?'<i class="fas fa-fw fa-trash"></i>':"Delete")+"</button></form>"}return n}}};function s(e,t,a,n,r,i,s,o,l,c){"boolean"!=typeof s&&(l=o,o=s,s=!1);const d="function"==typeof a?a.options:a;let u;if(e&&e.render&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0,r&&(d.functional=!0)),n&&(d._scopeId=n),i?(u=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(i)},d._ssrRegister=u):t&&(u=s?function(e){t.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,o(e))}),u)if(d.functional){const e=d.render;d.render=function(t,a){return u.call(a),e(t,a)}}else{const e=d.beforeCreate;d.beforeCreate=e?[].concat(e,u):[u]}return a}const o="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function l(e){return(e,t)=>function(e,t){const a=o?t.media||"default":e,n=d[a]||(d[a]={ids:new Set,styles:[]});if(!n.ids.has(e)){n.ids.add(e);let a=t.source;if(t.map&&(a+="\n/*# sourceURL="+t.map.sources[0]+" */",a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),n.element||(n.element=document.createElement("style"),n.element.type="text/css",t.media&&n.element.setAttribute("media",t.media),void 0===c&&(c=document.head||document.getElementsByTagName("head")[0]),c.appendChild(n.element)),"styleSheet"in n.element)n.styles.push(a),n.element.styleSheet.cssText=n.styles.filter(Boolean).join("\n");else{const e=n.ids.size-1,t=document.createTextNode(a),r=n.element.childNodes;r[e]&&n.element.removeChild(r[e]),r.length?n.element.insertBefore(t,r[e]):n.element.appendChild(t)}}}(e,t)}let c;const d={};var u=s({render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-wrapper"},[a("div",{staticClass:"table-actions"},[e.showActions.includes("create")?[a("div",{staticClass:"create table-action",domProps:{innerHTML:e._s(this.generateCreateButton())}})]:e._e(),e._v(" "),e.searchableColumns.length?[a("div",{staticClass:"search table-action float-right"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],staticClass:"form-control",attrs:{id:"search",type:"text",placeholder:"Search..."},domProps:{value:e.searchQuery},on:{input:function(t){t.target.composing||(e.searchQuery=t.target.value)}}})])]:e._e()],2),e._v(" "),a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-bordered"},[a("thead",{staticClass:"font-weight-bold"},[a("tr",e._l(e.tableHeaders,(function(t){return a("td",e._l(t,(function(t,n){return a("span",[e.orderableColumns.includes(n)?a("a",{staticClass:"orderable",attrs:{href:"#"},on:{click:function(t){return e.toggleOrder(t,n)}}},[e._v(e._s(t))]):a("span",[e._v(e._s(t))])])})),0)})),0)]),e._v(" "),a("tbody",[e.laravelData.total<=0?a("tr",[a("span",{staticClass:"no-results"},[e._v("No results")])]):e._e(),e._v(" "),e._l(e.laravelData.data,(function(t,n){return e.laravelData.total>0?a("tr",[e._l(t,(function(t,n){return 0==e.hideColumns.includes(n)?a("td",[[e._v(e._s(t))]],2):e._e()})),e._v(" "),e.showActions.length?a("td",{staticClass:"row-actions"},[e._l(e.generateRowActions(t.id),(function(t,n){return e._l(t,(function(t,n){return a("span",{staticClass:"action",domProps:{innerHTML:e._s(t)}})}))}))],2):e._e()],2):e._e()}))],2)])]),e._v(" "),e.laravelData.total>0?a("div",{attrs:{id:"pagination"}},[a("ul",{staticClass:"pagination"},[e._l(e.laravelData.links,(function(t){return[a("li",{staticClass:"page-item",class:{disabled:null==t.url,active:t.active}},[a("a",{staticClass:"page-link",attrs:{href:"#","data-href":t.url},domProps:{innerHTML:e._s(t.label)},on:{click:function(t){return e.paginate(t)}}})])]}))],2)]):e._e(),e._v(" "),a("div",{staticClass:"loading-spinner",class:{show:e.loading}},[e._m(0)]),e._v(" "),!0===e.showPerPage?[a("div",{staticClass:"per-page"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.perPage,expression:"perPage"}],staticClass:"custom-select",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.perPage=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"5"}},[e._v("5")]),e._v(" "),a("option",{attrs:{value:"25"}},[e._v("25")]),e._v(" "),a("option",{attrs:{value:"50"}},[e._v("50")]),e._v(" "),a("option",{attrs:{value:"100"}},[e._v("100")]),e._v(" "),a("option",{attrs:{value:"250"}},[e._v("250")]),e._v(" "),a("option",{attrs:{value:"500"}},[e._v("500")]),e._v(" "),a("option",{attrs:{value:"1000"}},[e._v("1000")])])])]:e._e()],2)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"lds-ring"},[t("div"),this._v(" "),t("div"),this._v(" "),t("div"),this._v(" "),t("div")])}]},(function(e){e&&e("data-v-16adfc9e_0",{source:"#pagination{display:inline-flex}.per-page{float:right}.table-actions{margin:10px 0}.table-actions .table-action{margin:0 10px;display:inline-block}.table-actions .table-action:first-child{margin-left:0}.table-actions .table-action:last-child{margin-right:0}.table-actions .search{width:200px;display:inline-block;position:relative}.row-actions .action{margin:0 10px}.row-actions .action:first-child{margin-left:0}.row-actions .action:last-child{margin-right:0}.row-actions .action-form{display:inline}.row-actions .action-form button{margin:-1px;padding:0;position:absolute}.loading-spinner{display:inline-flex;opacity:0;transition:opacity .1s cubic-bezier(1,1,0,0);position:absolute;margin:12px}.loading-spinner.show{opacity:1}.loading-spinner.show .lds-ring div{animation:lds-ring 1.2s cubic-bezier(.5,0,.5,1) infinite}.loading-spinner .lds-ring{position:relative}.loading-spinner .lds-ring div{box-sizing:border-box;display:block;position:absolute;border:2px solid #007bff;border-radius:50%;border-color:#007bff transparent transparent transparent;width:16px;height:16px}.loading-spinner .lds-ring div:nth-child(1){animation-delay:-.45s}.loading-spinner .lds-ring div:nth-child(2){animation-delay:-.3s}.loading-spinner .lds-ring div:nth-child(3){animation-delay:-.15s}@keyframes lds-ring{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}",map:void 0,media:void 0})}),i,void 0,!1,void 0,!1,l,void 0,void 0),h=function(e){h.installed||(h.installed=!0,e.component("VueLaravelTable",u))},p={install:h},f=null;return"undefined"!=typeof window?f=window.Vue:"undefined"!=typeof global&&(f=global.Vue),f&&f.use(p),u.install=h,e.default=u,Object.defineProperty(e,"__esModule",{value:!0}),e}({},_);